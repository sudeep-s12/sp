<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bharathnews SP - Your Daily News Source</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #1e40af;
            --accent: #3b82f6;
            --text: #1f2937;
            --bg: #f9fafb;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
        }
        
        .gradient-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .news-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
        }
        
        #adminModal {
            transition: all 0.3s ease;
        }
        
        .modal-open {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-closed {
            opacity: 0;
            visibility: hidden;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header class="gradient-header text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-newspaper text-3xl mr-2"></i>
                    <h1 class="text-2xl font-bold">Bharathnews SP</h1>
                </div>
                <div class="flex gap-2">
                    <button id="adminLoginBtn" class="bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition">
                        <i class="fas fa-lock mr-2"></i>Admin Login
                    </button>
                    <button id="adminLogoutBtn" class="hidden bg-red-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-600 transition">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex overflow-x-auto">
                <button id="homeTab" class="nav-tab active px-6 py-4 text-blue-600 font-medium border-b-2 border-blue-600">
                    <i class="fas fa-home mr-2"></i>Home
                </button>
                <button id="recentTab" class="nav-tab px-6 py-4 font-medium text-gray-600 hover:text-blue-600">
                    <i class="fas fa-clock mr-2"></i>Recent Posts
                </button>
                <button id="dailyTab" class="nav-tab px-6 py-4 font-medium text-gray-600 hover:text-blue-600">
                    <i class="fas fa-calendar-day mr-2"></i>Daily Posts
                </button>
                <button id="aboutTab" class="nav-tab px-6 py-4 font-medium text-gray-600 hover:text-blue-600">
                    <i class="fas fa-info-circle mr-2"></i>About
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- News Feed Section -->
        <section id="newsFeed" class="space-y-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Latest News Updates</h2>
                <div class="text-gray-500">
                    <span id="currentDate"></span>
                </div>
            </div>
            
            <!-- News cards will be dynamically inserted here -->
            <div id="newsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- News cards will be added here by JavaScript -->
            </div>
        </section>

        <!-- About Section (Hidden by default) -->
        <section id="aboutSection" class="hidden">
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">ಭಾರತ್‌ನ್ಯೂಸ್ ಎಸ್‌ಪಿ ಬಗ್ಗೆ</h2>
                <div class="flex items-center mb-6">
                    <div class="w-20 h-20 rounded-full overflow-hidden mr-4">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/955608c3-7481-4ccd-be15-39b47738a792.png" alt="ಭಾರತ್‌ನ್ಯೂಸ್ ಎಸ್‌ಪಿ ಲೋಗೋ" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold">ಭಾರತದ ಅಗ್ರಗಣ್ಯ ಸುದ್ದಿ ತಾಣ</h3>
                        <p class="text-gray-500">2023ರಿಂದ ಪ್ರಾಮಾಣಿಕ ಸುದ್ದಿ ನೀಡುತ್ತಿದೆ</p>
                    </div>
                </div>
                <div class="prose prose-blue">
                    <p>ಭಾರತ್‌ನ್ಯೂಸ್ ಎಸ್‌ಪಿ ವಿವಿಧ ವರ್ಗಗಳಲ್ಲಿ ಸಮಯಕ್ಕೆ ತಕ್ಕ ಮತ್ತು ನಿಖರವಾದ ಸುದ್ದಿ ಅಪ್ಡೇಟ್‌ಗಳನ್ನು ಒದಗಿಸಲು ಬದ್ಧವಾಗಿದೆ. ನಮ್ಮ ಉದ್ದೇಶ ನಮ್ಮ ಓದುಗರನ್ನು ವಿಶ್ವಾಸಾರ್ಹ ಮಾಹಿತಿಯೊಂದಿಗೆ ಮಾಹಿತಿ ನೀಡುವುದು.</p>
                    <p>ಉತ್ಸಾಹಿ ಪತ್ರಕರ್ತರ ತಂಡದಿಂದ ಸ್ಥಾಪಿತವಾದ ನಾವು, ನಮ್ಮ ವರದಿಯಲ್ಲಿ ಪತ್ರಿಕೋದ್ಯಮ ಮತ್ತು ಸತ್ಯತೆಯ ಉನ್ನತ ಮಟ್ಟಗಳನ್ನು ಕಾಯ್ದುಕೊಳ್ಳಲು ಪ್ರಯತ್ನಿಸುತ್ತೇವೆ.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-semibold mb-2">ನಮ್ಮ ತತ್ವಗಳು:</h4>
                        <ul class="list-disc pl-5 space-y-1">
                            <li>ವರದಿಯಲ್ಲಿ ನಿಖರತೆ</li>
                            <li>ಸಮಯಕ್ಕೆ ತಕ್ಕ ಅಪ್ಡೇಟ್‌ಗಳು</li>
                            <li>ನಿಷ್ಪಕ್ಷಪಾತ ದೃಷ್ಟಿಕೋನ</li>
                            <li>ಸಮುದಾಯದ ಭಾಗವಹಿಸುವಿಕೆ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Admin Modal -->
    <div id="adminModal" class="modal-closed fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">​</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Admin Panel</h3>
                            <div class="mb-4">
                                <label for="adminPassword" class="block text-sm font-medium text-gray-700">Password</label>
                                <input type="password" id="adminPassword" class="mt-1 p-2 border border-gray-300 rounded-md w-full">
                            </div>
                            <div id="postForm" class="hidden">
                                <div class="mb-4">
                                    <label for="newsTitle" class="block text-sm font-medium text-gray-700">News Title</label>
                                    <input type="text" id="newsTitle" class="mt-1 p-2 border border-gray-300 rounded-md w-full">
                                </div>
                                <div class="mb-4">
                                    <label for="newsContent" class="block text-sm font-medium text-gray-700">Content</label>
                                    <textarea id="newsContent" rows="4" class="mt-1 p-2 border border-gray-300 rounded-md w-full"></textarea>
                                </div>
                                <div class="mb-4">
                                    <label for="newsImage" class="block text-sm font-medium text-gray-700">Image URL</label>
                                    <input type="text" id="newsImage" class="mt-1 p-2 border border-gray-300 rounded-md w-full" placeholder="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/3a094dcf-7c31-4302-8956-e01bbda03fb9.png">
                                </div>
                                <div class="mb-4">
                                    <label for="newsCategory" class="block text-sm font-medium text-gray-700">Category</label>
                                    <select id="newsCategory" class="mt-1 p-2 border border-gray-300 rounded-md w-full">
                                        <option value="general">General</option>
                                        <option value="politics">Politics</option>
                                        <option value="sports">Sports</option>
                                        <option value="technology">Technology</option>
                                        <option value="entertainment">Entertainment</option>
                                    </select>
                                </div>
                                <div id="postError" class="text-red-500 text-sm mb-2 hidden"></div>
                                <div class="flex justify-end">
                                    <button id="postNewsBtn" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">Post News</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button id="closeModalBtn" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">
                        Close
                    </button>
                    <button id="adminSubmitBtn" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Submit
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center">
                        <i class="fas fa-newspaper text-2xl mr-2"></i>
                        <h2 class="text-xl font-bold">Bharathnews SP</h2>
                    </div>
                    <p class="text-gray-400 mt-2">Your trusted source for daily news updates</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-300 hover:text-white">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="text-gray-300 hover:text-white">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="text-gray-300 hover:text-white">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="text-gray-300 hover:text-white">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-6 pt-6 text-center text-gray-400">
                <p>© 2023 Bharathnews SP. All rights reserved.</p>
            </div>
        </div>
    </footer>

<!-- HEAD and BODY content remains the same until <script> tag... -->

<script>
    // ✅ Current date display
    document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });

    let newsPosts = [];

    const ADMIN_PASSWORD = "Sudeep@123";

    const adminLoginBtn = document.getElementById('adminLoginBtn');
    const adminLogoutBtn = document.getElementById('adminLogoutBtn');
    const adminModal = document.getElementById('adminModal');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const adminSubmitBtn = document.getElementById('adminSubmitBtn');
    const adminPassword = document.getElementById('adminPassword');
    const postForm = document.getElementById('postForm');
    const postNewsBtn = document.getElementById('postNewsBtn');
    const newsTitle = document.getElementById('newsTitle');
    const newsContent = document.getElementById('newsContent');
    const newsImage = document.getElementById('newsImage');
    const newsCategory = document.getElementById('newsCategory');
    const postError = document.getElementById('postError');
    const newsContainer = document.getElementById('newsContainer');
    const newsFeedSection = document.getElementById('newsFeed');
    const aboutSection = document.getElementById('aboutSection');

    const homeTab = document.getElementById('homeTab');
    const recentTab = document.getElementById('recentTab');
    const dailyTab = document.getElementById('dailyTab');
    const aboutTab = document.getElementById('aboutTab');

    adminLoginBtn.addEventListener('click', openAdminModal);
    adminLogoutBtn.addEventListener('click', () => {
        adminPassword.disabled = false;
        adminPassword.value = '';
        adminLoginBtn.classList.remove('hidden');
        adminLogoutBtn.classList.add('hidden');
        postForm.classList.add('hidden');
        fetchPosts();
        closeAdminModal();
    });
    closeModalBtn.addEventListener('click', closeAdminModal);
    adminSubmitBtn.addEventListener('click', handleAdminSubmit);
    postNewsBtn.addEventListener('click', addNewPost);

    homeTab.addEventListener('click', () => showSection('newsFeed'));
    recentTab.addEventListener('click', () => showSection('newsFeed', filterRecent));
    dailyTab.addEventListener('click', () => showSection('newsFeed', filterDaily));
    aboutTab.addEventListener('click', () => showSection('aboutSection'));

    window.addEventListener('DOMContentLoaded', fetchPosts);

    async function fetchPosts() {
        const res = await fetch('http://localhost:5000/posts');
        newsPosts = await res.json();
        displayNewsPosts();
    }

    function openAdminModal() {
        adminModal.classList.remove('modal-closed');
        adminModal.classList.add('modal-open');
        postForm.classList.add('hidden');
    }

    function closeAdminModal() {
        adminModal.classList.remove('modal-open');
        adminModal.classList.add('modal-closed');
        adminPassword.value = '';
        postError.classList.add('hidden');
        postForm.classList.add('hidden');
        adminSubmitBtn.classList.remove('hidden');
    }

    function handleAdminSubmit() {
        if (adminPassword.value === ADMIN_PASSWORD) {
            postForm.classList.remove('hidden');
            adminSubmitBtn.classList.add('hidden');
            adminPassword.disabled = true;
            postError.classList.add('hidden');
            adminLoginBtn.classList.add('hidden');
            adminLogoutBtn.classList.remove('hidden');
            fetchPosts();
        } else {
            postError.textContent = 'Incorrect password.';
            postError.classList.remove('hidden');
        }
    }

    async function addNewPost() {
        const title = newsTitle.value.trim();
        const content = newsContent.value.trim();
        const image = newsImage.value.trim();
        const category = newsCategory.value;

        if (!title || !content) {
            postError.textContent = 'Please fill in all required fields.';
            postError.classList.remove('hidden');
            return;
        }

        const postData = {
            title,
            content,
            image: image || 'https://via.placeholder.com/400x200',
            category
        };

        const res = await fetch('http://localhost:5000/posts', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(postData)
        });

        if (res.ok) {
            await fetchPosts();
            alert('News post added successfully!');
            newsTitle.value = '';
            newsContent.value = '';
            newsImage.value = '';
            newsCategory.value = 'general';
            postError.classList.add('hidden');
        } else {
            alert('Failed to add post');
        }
    }

    function displayNewsPosts(posts = newsPosts) {
        newsContainer.innerHTML = '';

        posts.forEach(post => {
            const card = document.createElement('div');
            card.className = 'news-card bg-white rounded-xl shadow-md overflow-hidden';

            const categoryClasses = {
                general: 'bg-gray-100 text-gray-800',
                politics: 'bg-blue-100 text-blue-800',
                sports: 'bg-green-100 text-green-800',
                technology: 'bg-purple-100 text-purple-800',
                entertainment: 'bg-pink-100 text-pink-800'
            };

            card.innerHTML = `
                <img src="${post.image}" class="w-full h-48 object-cover" alt="${post.title}">
                <div class="p-6">
                    <div class="flex justify-between mb-2">
                        <span class="tag ${categoryClasses[post.category] || ''}">${post.category}</span>
                        <span class="text-xs text-gray-500">${post.date} at ${post.time}</span>
                    </div>
                    <h3 class="text-xl font-bold mb-2">${post.title}</h3>
                    <p class="text-gray-600">${post.content}</p>
                    ${adminPassword.disabled ? `<button onclick="deletePost(${post.id})" class="mt-4 bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">
                        <i class="fas fa-trash mr-1"></i>Delete</button>` : ''}
                </div>
            `;
            newsContainer.appendChild(card);
        });
    }

    async function deletePost(postId) {
        if (!adminPassword.disabled) {
            alert('Only admin can delete posts.');
            return;
        }
        if (confirm("Are you sure to delete this post?")) {
            await fetch(`http://localhost:5000/posts/${postId}`, {
                method: 'DELETE'
            });
            await fetchPosts();
        }
    }

    function filterRecent() {
        return newsPosts.slice(0, 5);
    }

    function filterDaily() {
        const today = new Date().toISOString().split('T')[0];
        return newsPosts.filter(post => post.date === today);
    }

    function showSection(id, filterFn) {
        newsFeedSection.classList.add('hidden');
        aboutSection.classList.add('hidden');

        if (id === 'newsFeed' && typeof filterFn === 'function') {
            displayNewsPosts(filterFn());
        } else if (id === 'newsFeed') {
            displayNewsPosts();
        }

        document.getElementById(id).classList.remove('hidden');

        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.classList.remove('text-blue-600', 'border-blue-600');
            tab.classList.add('text-gray-600');
        });

        const tabMap = {
            newsFeed: homeTab,
            aboutSection: aboutTab
        };

        const activeTab = tabMap[id] || homeTab;
        activeTab.classList.remove('text-gray-600');
        activeTab.classList.add('text-blue-600', 'border-blue-600');
    }
</script>

</body>
</html>
